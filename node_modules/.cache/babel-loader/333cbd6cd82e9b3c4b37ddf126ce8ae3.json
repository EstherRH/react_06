{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatUrl = formatUrl;\nexports.formatWithValidation = formatWithValidation;\nexports.urlObjectKeys = void 0;\n\nvar querystring = _interopRequireWildcard(require(\"./querystring\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nconst slashedProtocols = /https?|ftp|gopher|file/;\n\nfunction formatUrl(urlObj) {\n  let {\n    auth,\n    hostname\n  } = urlObj;\n  let protocol = urlObj.protocol || '';\n  let pathname = urlObj.pathname || '';\n  let hash = urlObj.hash || '';\n  let query = urlObj.query || '';\n  let host = false;\n  auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : '';\n\n  if (urlObj.host) {\n    host = auth + urlObj.host;\n  } else if (hostname) {\n    host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname);\n\n    if (urlObj.port) {\n      host += ':' + urlObj.port;\n    }\n  }\n\n  if (query && typeof query === 'object') {\n    query = String(querystring.urlQueryToSearchParams(query));\n  }\n\n  let search = urlObj.search || query && `?${query}` || '';\n  if (protocol && !protocol.endsWith(':')) protocol += ':';\n\n  if (urlObj.slashes || (!protocol || slashedProtocols.test(protocol)) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname[0] !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash[0] !== '#') hash = '#' + hash;\n  if (search && search[0] !== '?') search = '?' + search;\n  pathname = pathname.replace(/[?#]/g, encodeURIComponent);\n  search = search.replace('#', '%23');\n  return `${protocol}${host}${pathname}${search}${hash}`;\n}\n\nconst urlObjectKeys = ['auth', 'hash', 'host', 'hostname', 'href', 'path', 'pathname', 'port', 'protocol', 'query', 'search', 'slashes'];\nexports.urlObjectKeys = urlObjectKeys;\n\nfunction formatWithValidation(url) {\n  if (process.env.NODE_ENV === 'development') {\n    if (url !== null && typeof url === 'object') {\n      Object.keys(url).forEach(key => {\n        if (urlObjectKeys.indexOf(key) === -1) {\n          console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n        }\n      });\n    }\n  }\n\n  return formatUrl(url);\n}","map":{"version":3,"sources":["../../../../../shared/lib/router/utils/format-url.ts"],"names":["querystring","slashedProtocols","formatUrl","urlObj","auth","hostname","protocol","pathname","hash","query","host","encodeURIComponent","replace","indexOf","port","String","urlQueryToSearchParams","search","endsWith","slashes","test","urlObjectKeys","formatWithValidation","url","process","env","NODE_ENV","Object","keys","forEach","key","console","warn"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.formatUrl = formatUrl;\nexports.formatWithValidation = formatWithValidation;\nexports.urlObjectKeys = void 0;\nvar querystring = _interopRequireWildcard(require(\"./querystring\"));\nfunction _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n        return obj;\n    } else {\n        var newObj = {};\n        if (obj != null) {\n            for(var key in obj){\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n                    if (desc.get || desc.set) {\n                        Object.defineProperty(newObj, key, desc);\n                    } else {\n                        newObj[key] = obj[key];\n                    }\n                }\n            }\n        }\n        newObj.default = obj;\n        return newObj;\n    }\n}\nconst slashedProtocols = /https?|ftp|gopher|file/;\nfunction formatUrl(urlObj) {\n    let { auth , hostname  } = urlObj;\n    let protocol = urlObj.protocol || '';\n    let pathname = urlObj.pathname || '';\n    let hash = urlObj.hash || '';\n    let query = urlObj.query || '';\n    let host = false;\n    auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : '';\n    if (urlObj.host) {\n        host = auth + urlObj.host;\n    } else if (hostname) {\n        host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname);\n        if (urlObj.port) {\n            host += ':' + urlObj.port;\n        }\n    }\n    if (query && typeof query === 'object') {\n        query = String(querystring.urlQueryToSearchParams(query));\n    }\n    let search = urlObj.search || query && `?${query}` || '';\n    if (protocol && !protocol.endsWith(':')) protocol += ':';\n    if (urlObj.slashes || (!protocol || slashedProtocols.test(protocol)) && host !== false) {\n        host = '//' + (host || '');\n        if (pathname && pathname[0] !== '/') pathname = '/' + pathname;\n    } else if (!host) {\n        host = '';\n    }\n    if (hash && hash[0] !== '#') hash = '#' + hash;\n    if (search && search[0] !== '?') search = '?' + search;\n    pathname = pathname.replace(/[?#]/g, encodeURIComponent);\n    search = search.replace('#', '%23');\n    return `${protocol}${host}${pathname}${search}${hash}`;\n}\nconst urlObjectKeys = [\n    'auth',\n    'hash',\n    'host',\n    'hostname',\n    'href',\n    'path',\n    'pathname',\n    'port',\n    'protocol',\n    'query',\n    'search',\n    'slashes', \n];\nexports.urlObjectKeys = urlObjectKeys;\nfunction formatWithValidation(url) {\n    if (process.env.NODE_ENV === 'development') {\n        if (url !== null && typeof url === 'object') {\n            Object.keys(url).forEach((key)=>{\n                if (urlObjectKeys.indexOf(key) === -1) {\n                    console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n                }\n            });\n        }\n    }\n    return formatUrl(url);\n}\n\n//# sourceMappingURL=format-url.js.map"]},"metadata":{},"sourceType":"script"}