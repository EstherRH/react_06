{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = initHeadManager;\nexports.isEqualNode = isEqualNode;\nexports.DOMAttributeNames = void 0;\n\nfunction initHeadManager() {\n  let updatePromise = null;\n  return {\n    mountedInstances: new Set(),\n    updateHead: head => {\n      const promise = updatePromise = Promise.resolve().then(() => {\n        if (promise !== updatePromise) return;\n        updatePromise = null;\n        const tags = {};\n        head.forEach(h => {\n          if ( // If the font tag is loaded only on client navigation\n          // it won't be inlined. In this case revert to the original behavior\n          h.type === 'link' && h.props['data-optimized-fonts']) {\n            if (document.querySelector(`style[data-href=\"${h.props['data-href']}\"]`)) {\n              return;\n            } else {\n              h.props.href = h.props['data-href'];\n              h.props['data-href'] = undefined;\n            }\n          }\n\n          const components = tags[h.type] || [];\n          components.push(h);\n          tags[h.type] = components;\n        });\n        const titleComponent = tags.title ? tags.title[0] : null;\n        let title = '';\n\n        if (titleComponent) {\n          const {\n            children\n          } = titleComponent.props;\n          title = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n        }\n\n        if (title !== document.title) document.title = title;\n        ['meta', 'base', 'link', 'style', 'script'].forEach(type => {\n          updateElements(type, tags[type] || []);\n        });\n      });\n    }\n  };\n}\n\nconst DOMAttributeNames = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv',\n  noModule: 'noModule'\n};\nexports.DOMAttributeNames = DOMAttributeNames;\n\nfunction reactElementToDOM({\n  type,\n  props\n}) {\n  const el = document.createElement(type);\n\n  for (const p in props) {\n    if (!props.hasOwnProperty(p)) continue;\n    if (p === 'children' || p === 'dangerouslySetInnerHTML') continue; // we don't render undefined props to the DOM\n\n    if (props[p] === undefined) continue;\n    const attr = DOMAttributeNames[p] || p.toLowerCase();\n\n    if (type === 'script' && (attr === 'async' || attr === 'defer' || attr === 'noModule')) {\n      el[attr] = !!props[p];\n    } else {\n      el.setAttribute(attr, props[p]);\n    }\n  }\n\n  const {\n    children,\n    dangerouslySetInnerHTML\n  } = props;\n\n  if (dangerouslySetInnerHTML) {\n    el.innerHTML = dangerouslySetInnerHTML.__html || '';\n  } else if (children) {\n    el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n  }\n\n  return el;\n}\n\nfunction isEqualNode(oldTag, newTag) {\n  if (oldTag instanceof HTMLElement && newTag instanceof HTMLElement) {\n    const nonce = newTag.getAttribute('nonce'); // Only strip the nonce if `oldTag` has had it stripped. An element's nonce attribute will not\n    // be stripped if there is no content security policy response header that includes a nonce.\n\n    if (nonce && !oldTag.getAttribute('nonce')) {\n      const cloneTag = newTag.cloneNode(true);\n      cloneTag.setAttribute('nonce', '');\n      cloneTag.nonce = nonce;\n      return nonce === oldTag.nonce && oldTag.isEqualNode(cloneTag);\n    }\n  }\n\n  return oldTag.isEqualNode(newTag);\n}\n\nfunction updateElements(type, components) {\n  const headEl = document.getElementsByTagName('head')[0];\n  const headCountEl = headEl.querySelector('meta[name=next-head-count]');\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!headCountEl) {\n      console.error('Warning: next-head-count is missing. https://nextjs.org/docs/messages/next-head-count-missing');\n      return;\n    }\n  }\n\n  const headCount = Number(headCountEl.content);\n  const oldTags = [];\n\n  for (let i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = (j === null || j === void 0 ? void 0 : j.previousElementSibling) || null) {\n    var ref;\n\n    if ((j === null || j === void 0 ? void 0 : (ref = j.tagName) === null || ref === void 0 ? void 0 : ref.toLowerCase()) === type) {\n      oldTags.push(j);\n    }\n  }\n\n  const newTags = components.map(reactElementToDOM).filter(newTag => {\n    for (let k = 0, len = oldTags.length; k < len; k++) {\n      const oldTag = oldTags[k];\n\n      if (isEqualNode(oldTag, newTag)) {\n        oldTags.splice(k, 1);\n        return false;\n      }\n    }\n\n    return true;\n  });\n  oldTags.forEach(t => {\n    var ref;\n    return (ref = t.parentNode) === null || ref === void 0 ? void 0 : ref.removeChild(t);\n  });\n  newTags.forEach(t => headEl.insertBefore(t, headCountEl));\n  headCountEl.content = (headCount - oldTags.length + newTags.length).toString();\n}\n\nif (typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) {\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"sources":["../../client/head-manager.ts"],"names":["DOMAttributeNames","acceptCharset","className","htmlFor","httpEquiv","noModule","reactElementToDOM","type","props","el","document","createElement","p","hasOwnProperty","undefined","attr","toLowerCase","setAttribute","children","dangerouslySetInnerHTML","innerHTML","__html","textContent","Array","isArray","join","isEqualNode","oldTag","newTag","HTMLElement","nonce","getAttribute","cloneTag","cloneNode","updateElements","components","headEl","getElementsByTagName","headCountEl","querySelector","process","env","NODE_ENV","console","error","headCount","Number","content","oldTags","i","j","previousElementSibling","tagName","push","newTags","map","filter","k","len","length","splice","forEach","t","parentNode","removeChild","insertBefore","toString","initHeadManager","updatePromise","mountedInstances","Set","updateHead","head","promise","Promise","resolve","then","tags","h","href","titleComponent","title"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = initHeadManager;\nexports.isEqualNode = isEqualNode;\nexports.DOMAttributeNames = void 0;\nfunction initHeadManager() {\n    let updatePromise = null;\n    return {\n        mountedInstances: new Set(),\n        updateHead: (head)=>{\n            const promise = updatePromise = Promise.resolve().then(()=>{\n                if (promise !== updatePromise) return;\n                updatePromise = null;\n                const tags = {};\n                head.forEach((h)=>{\n                    if (// If the font tag is loaded only on client navigation\n                    // it won't be inlined. In this case revert to the original behavior\n                    h.type === 'link' && h.props['data-optimized-fonts']) {\n                        if (document.querySelector(`style[data-href=\"${h.props['data-href']}\"]`)) {\n                            return;\n                        } else {\n                            h.props.href = h.props['data-href'];\n                            h.props['data-href'] = undefined;\n                        }\n                    }\n                    const components = tags[h.type] || [];\n                    components.push(h);\n                    tags[h.type] = components;\n                });\n                const titleComponent = tags.title ? tags.title[0] : null;\n                let title = '';\n                if (titleComponent) {\n                    const { children  } = titleComponent.props;\n                    title = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n                }\n                if (title !== document.title) document.title = title;\n                [\n                    'meta',\n                    'base',\n                    'link',\n                    'style',\n                    'script'\n                ].forEach((type)=>{\n                    updateElements(type, tags[type] || []);\n                });\n            });\n        }\n    };\n}\nconst DOMAttributeNames = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv',\n    noModule: 'noModule'\n};\nexports.DOMAttributeNames = DOMAttributeNames;\nfunction reactElementToDOM({ type , props  }) {\n    const el = document.createElement(type);\n    for(const p in props){\n        if (!props.hasOwnProperty(p)) continue;\n        if (p === 'children' || p === 'dangerouslySetInnerHTML') continue;\n        // we don't render undefined props to the DOM\n        if (props[p] === undefined) continue;\n        const attr = DOMAttributeNames[p] || p.toLowerCase();\n        if (type === 'script' && (attr === 'async' || attr === 'defer' || attr === 'noModule')) {\n            el[attr] = !!props[p];\n        } else {\n            el.setAttribute(attr, props[p]);\n        }\n    }\n    const { children , dangerouslySetInnerHTML  } = props;\n    if (dangerouslySetInnerHTML) {\n        el.innerHTML = dangerouslySetInnerHTML.__html || '';\n    } else if (children) {\n        el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n    }\n    return el;\n}\nfunction isEqualNode(oldTag, newTag) {\n    if (oldTag instanceof HTMLElement && newTag instanceof HTMLElement) {\n        const nonce = newTag.getAttribute('nonce');\n        // Only strip the nonce if `oldTag` has had it stripped. An element's nonce attribute will not\n        // be stripped if there is no content security policy response header that includes a nonce.\n        if (nonce && !oldTag.getAttribute('nonce')) {\n            const cloneTag = newTag.cloneNode(true);\n            cloneTag.setAttribute('nonce', '');\n            cloneTag.nonce = nonce;\n            return nonce === oldTag.nonce && oldTag.isEqualNode(cloneTag);\n        }\n    }\n    return oldTag.isEqualNode(newTag);\n}\nfunction updateElements(type, components) {\n    const headEl = document.getElementsByTagName('head')[0];\n    const headCountEl = headEl.querySelector('meta[name=next-head-count]');\n    if (process.env.NODE_ENV !== 'production') {\n        if (!headCountEl) {\n            console.error('Warning: next-head-count is missing. https://nextjs.org/docs/messages/next-head-count-missing');\n            return;\n        }\n    }\n    const headCount = Number(headCountEl.content);\n    const oldTags = [];\n    for(let i = 0, j = headCountEl.previousElementSibling; i < headCount; i++, j = (j === null || j === void 0 ? void 0 : j.previousElementSibling) || null){\n        var ref;\n        if ((j === null || j === void 0 ? void 0 : (ref = j.tagName) === null || ref === void 0 ? void 0 : ref.toLowerCase()) === type) {\n            oldTags.push(j);\n        }\n    }\n    const newTags = components.map(reactElementToDOM).filter((newTag)=>{\n        for(let k = 0, len = oldTags.length; k < len; k++){\n            const oldTag = oldTags[k];\n            if (isEqualNode(oldTag, newTag)) {\n                oldTags.splice(k, 1);\n                return false;\n            }\n        }\n        return true;\n    });\n    oldTags.forEach((t)=>{\n        var ref;\n        return (ref = t.parentNode) === null || ref === void 0 ? void 0 : ref.removeChild(t);\n    });\n    newTags.forEach((t)=>headEl.insertBefore(t, headCountEl)\n    );\n    headCountEl.content = (headCount - oldTags.length + newTags.length).toString();\n}\n\nif (typeof exports.default === 'function' || (typeof exports.default === 'object' && exports.default !== null)) {\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}\n\n//# sourceMappingURL=head-manager.js.map"]},"metadata":{},"sourceType":"script"}